global:
  domain: argocd-ing.backstage.local

server:
  extraArgs:
    - --insecure

  service:
    type: ClusterIP
    annotations:
      cloud.google.com/neg: '{"ingress": true}'
      cloud.google.com/backend-config: '{"ports": {"http":"argocd-backend-config"}}'
    ports:
      - name: http
        port: 80
        protocol: TCP
        targetPort: 8080

  ingress:
    enabled: true
    controller: gke
    annotations:
      kubernetes.io/ingress.allow-http: "true"
    gke:
      backendConfig:
        healthCheck:
          checkIntervalSec: 30
          timeoutSec: 5
          healthyThreshold: 1
          unhealthyThreshold: 2
          type: HTTP
          requestPath: /healthz
          port: 8080
      # Remover frontendConfig redirect ou deix√°-lo desabilitado
      # frontendConfig:
      #   redirectToHttps:
      #     enabled: false
